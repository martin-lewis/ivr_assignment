\documentclass{report}
\usepackage[utf8]{inputenc}
% \usepackage[landscape]{geometry}
\usepackage{graphicx}
\title{IVR Assignment}
\author{Maksymilian Mozolewski \& Martin Lewis}
\date{November 2020}
\newcommand\scalemath[2]{\scalebox{#1}{\mbox{\ensuremath{\displaystyle #2}}}}
\usepackage{amsmath}
\usepackage[landscape,margin=0.5in]{geometry}

\let\cos\relax
\let\sin\relax
% \DeclareMathOperator{\cos}{\mathit{C}}
% \DeclareMathOperator{\sin}{\mathit{S}}
\newcommand{\sin}[1]{\mathit{S}_{#1}}
\newcommand{\cos}[1]{\mathit{C}_{#1}}

\begin{document}

\maketitle

\section*{3.1}

The forward kinematics, was derived using d-h parameters and a sympy script which parsed it to avoid any mathematical errors (The said script is available in the repository). The final forward kinematics translation component looks like the following:

\begin{equation*}
\begin{bmatrix}
           x_{e} \\
           y_{e} \\
           z_{e}
\end{bmatrix} = 
\left(\begin{array}{c} %
    3 \left(\sin{q_{1}} \sin{q_{2}} \cos{q_{3}} + \sin{q_{3}} \cos{q_{1}}\right) \cos{q_{4}}  %
    + 3.5 \sin{q_{1}} \sin{q_{2}} \cos{q_{3}} %
    + 3 \sin{q_{1}} \sin{q_{4}} \cos{q_{2} } %
    + 3.5 \sin{q_{3}} \cos{q_{1}} %
    \\
    3 \left(\sin{q_{1}} \sin{q_{3}} %
    - \sin{q_{2}} \cos{q_{1}} \cos{q_{3}}\right) \cos{q_{4}} %
    + 3.5 \sin{q_{1}} \sin{q_{3}} %
    - 3.5 \sin{q_{2}} \cos{q_{1}} \cos{q_{3}} %
    - 3 \sin{q_{4}} \cos{q_{1}} \cos{q_{2}} %
    \\
    - 3 \sin{q_{2}} \sin{q_{4}} %
    + 3 \cos{q_{2}} \cos{q_{3}} \cos{q_{4}} %
    + 3.5 \cos{q_{2}} \cos{q_{3}} + 2.5
    \end{array}\right)
\end{equation*}


\begin{equation*}
\begin{bmatrix}
           \dot{x_{e}} \\
           \dot{y_{e}} \\
           \dpt{z_{e}}
\end{bmatrix} = %
\left(\begin{array}{c}\dot{q_{1}} \left(\left(- 3 \sin{\left(q_{1} \right)} \sin{\left(q_{3} \right)} + 3 \sin{\left(q_{2} \right)} \cos{\left(q_{1} \right)} \cos{\left(q_{3} \right)}\right) \cos{\left(q_{4} \right)} - 3.5 \sin{\left(q_{1} \right)} \sin{\left(q_{3} \right)} + 3.5 \sin{\left(q_{2} \right)} \cos{\left(q_{1} \right)} \cos{\left(q_{3} \right)} + 3 \sin{\left(q_{4} \right)} \cos{\left(q_{1} \right)} \cos{\left(q_{2} \right)}\right) + \dot{q_{2}} \left(- 3 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \sin{\left(q_{4} \right)} + 3 \sin{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{3} \right)} \cos{\left(q_{4} \right)} + 3.5 \sin{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{3} \right)}\right) + \dot{q_{3}} \left(\left(- 3 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \sin{\left(q_{3} \right)} + 3 \cos{\left(q_{1} \right)} \cos{\left(q_{3} \right)}\right) \cos{\left(q_{4} \right)} - 3.5 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \sin{\left(q_{3} \right)} + 3.5 \cos{\left(q_{1} \right)} \cos{\left(q_{3} \right)}\right) + \dot{q_{4}} \left(- \left(3 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \cos{\left(q_{3} \right)} + 3 \sin{\left(q_{3} \right)} \cos{\left(q_{1} \right)}\right) \sin{\left(q_{4} \right)} + 3 \sin{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{4} \right)}\right)\\\dot{q_{1}} \left(\left(3 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \cos{\left(q_{3} \right)} + 3 \sin{\left(q_{3} \right)} \cos{\left(q_{1} \right)}\right) \cos{\left(q_{4} \right)} + 3.5 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \cos{\left(q_{3} \right)} + 3 \sin{\left(q_{1} \right)} \sin{\left(q_{4} \right)} \cos{\left(q_{2} \right)} + 3.5 \sin{\left(q_{3} \right)} \cos{\left(q_{1} \right)}\right) + \dot{q_{2}} \left(3 \sin{\left(q_{2} \right)} \sin{\left(q_{4} \right)} \cos{\left(q_{1} \right)} - 3 \cos{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{3} \right)} \cos{\left(q_{4} \right)} - 3.5 \cos{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{3} \right)}\right) + \dot{q_{3}} \left(\left(3 \sin{\left(q_{1} \right)} \cos{\left(q_{3} \right)} + 3 \sin{\left(q_{2} \right)} \sin{\left(q_{3} \right)} \cos{\left(q_{1} \right)}\right) \cos{\left(q_{4} \right)} + 3.5 \sin{\left(q_{1} \right)} \cos{\left(q_{3} \right)} + 3.5 \sin{\left(q_{2} \right)} \sin{\left(q_{3} \right)} \cos{\left(q_{1} \right)}\right) + \dot{q_{4}} \left(- \left(3 \sin{\left(q_{1} \right)} \sin{\left(q_{3} \right)} - 3 \sin{\left(q_{2} \right)} \cos{\left(q_{1} \right)} \cos{\left(q_{3} \right)}\right) \sin{\left(q_{4} \right)} - 3 \cos{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{4} \right)}\right)\\\dot{q_{2}} \left(- 3 \sin{\left(q_{2} \right)} \cos{\left(q_{3} \right)} \cos{\left(q_{4} \right)} - 3.5 \sin{\left(q_{2} \right)} \cos{\left(q_{3} \right)} - 3 \sin{\left(q_{4} \right)} \cos{\left(q_{2} \right)}\right) + \dot{q_{3}} \left(- 3 \sin{\left(q_{3} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{4} \right)} - 3.5 \sin{\left(q_{3} \right)} \cos{\left(q_{2} \right)}\right) + \dot{q_{4}} \left(- 3 \sin{\left(q_{2} \right)} \cos{\left(q_{4} \right)} - 3 \sin{\left(q_{4} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{3} \right)}\right)\end{array}\right)
\end{equation*}

\begin{center}
    \begin{tabular}{|c|c|c|c|c|c|c|}
    \hline 
     q1&q2&q3&q4&Vision EFPos &FK EFPos& Euclidian Distance \\ \hline 
    0.50&-0.50&0.50&-0.50&[0.672 4.907 5.993]&[0.738 4.782 6.534]&0.56 \\ \hline 
    -0.50&0.50&-0.50&0.50&[-4.542 -2.081  5.983]&[-4.422 -1.962  6.534]&0.58 \\ \hline 
    0.50&0.50&0.50&0.50&[ 4.511 -2.067  5.977]&[ 4.422 -1.962  6.534]&0.57 \\ \hline 
    -0.50&-0.50&-0.50&-0.50&[-0.768  4.882  6.004]&[-0.738  4.782  6.534]&0.54 \\ \hline 
    1.00&0.50&-1.00&0.50&[-0.4   -6.1    4.117]&[-0.389 -5.883  4.718]&0.64 \\ \hline 
    0.50&1.00&-1.00&0.50&[-2.896 -5.787  2.423]&[-2.819 -5.603  3.08 ]&0.69 \\ \hline 
    1.57&1.57&0.10&0.10&[6.58  0.652 1.561]&[6.453 0.647 2.2  ]&0.65 \\ \hline 
    3.14&1.57&0.10&0.10&[-0.925  6.674  1.59 ]&[-0.647  6.453  2.2  ]&0.71 \\ \hline 
    -1.57&1.57&1.00&0.50&[-3.398 -5.339  0.359]&[-3.314 -5.161  1.062]&0.73 \\ \hline 
    -3.14&1.57&0.10&0.10&[-0.925  6.674  1.59 ]&[-0.647  6.453  2.2  ]&0.71 \\ \hline 
    \end{tabular}
\end{center}


\begin{equation}\left(\begin{array}{cccc}\left(- 3 \sin{\left(q_{1} \right)} \sin{\left(q_{3} \right)} + 3 \sin{\left(q_{2} \right)} \cos{\left(q_{1} \right)} \cos{\left(q_{3} \right)}\right) \cos{\left(q_{4} \right)} - 3.5 \sin{\left(q_{1} \right)} \sin{\left(q_{3} \right)} + 3.5 \sin{\left(q_{2} \right)} \cos{\left(q_{1} \right)} \cos{\left(q_{3} \right)} + 3 \sin{\left(q_{4} \right)} \cos{\left(q_{1} \right)} \cos{\left(q_{2} \right)} & - 3 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \sin{\left(q_{4} \right)} + 3 \sin{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{3} \right)} \cos{\left(q_{4} \right)} + 3.5 \sin{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{3} \right)} & \left(- 3 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \sin{\left(q_{3} \right)} + 3 \cos{\left(q_{1} \right)} \cos{\left(q_{3} \right)}\right) \cos{\left(q_{4} \right)} - 3.5 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \sin{\left(q_{3} \right)} + 3.5 \cos{\left(q_{1} \right)} \cos{\left(q_{3} \right)} & - \left(3 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \cos{\left(q_{3} \right)} + 3 \sin{\left(q_{3} \right)} \cos{\left(q_{1} \right)}\right) \sin{\left(q_{4} \right)} + 3 \sin{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{4} \right)}\\\left(3 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \cos{\left(q_{3} \right)} + 3 \sin{\left(q_{3} \right)} \cos{\left(q_{1} \right)}\right) \cos{\left(q_{4} \right)} + 3.5 \sin{\left(q_{1} \right)} \sin{\left(q_{2} \right)} \cos{\left(q_{3} \right)} + 3 \sin{\left(q_{1} \right)} \sin{\left(q_{4} \right)} \cos{\left(q_{2} \right)} + 3.5 \sin{\left(q_{3} \right)} \cos{\left(q_{1} \right)} & 3 \sin{\left(q_{2} \right)} \sin{\left(q_{4} \right)} \cos{\left(q_{1} \right)} - 3 \cos{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{3} \right)} \cos{\left(q_{4} \right)} - 3.5 \cos{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{3} \right)} & \left(3 \sin{\left(q_{1} \right)} \cos{\left(q_{3} \right)} + 3 \sin{\left(q_{2} \right)} \sin{\left(q_{3} \right)} \cos{\left(q_{1} \right)}\right) \cos{\left(q_{4} \right)} + 3.5 \sin{\left(q_{1} \right)} \cos{\left(q_{3} \right)} + 3.5 \sin{\left(q_{2} \right)} \sin{\left(q_{3} \right)} \cos{\left(q_{1} \right)} & - \left(3 \sin{\left(q_{1} \right)} \sin{\left(q_{3} \right)} - 3 \sin{\left(q_{2} \right)} \cos{\left(q_{1} \right)} \cos{\left(q_{3} \right)}\right) \sin{\left(q_{4} \right)} - 3 \cos{\left(q_{1} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{4} \right)}\\0 & - 3 \sin{\left(q_{2} \right)} \cos{\left(q_{3} \right)} \cos{\left(q_{4} \right)} - 3.5 \sin{\left(q_{2} \right)} \cos{\left(q_{3} \right)} - 3 \sin{\left(q_{4} \right)} \cos{\left(q_{2} \right)} & - 3 \sin{\left(q_{3} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{4} \right)} - 3.5 \sin{\left(q_{3} \right)} \cos{\left(q_{2} \right)} & - 3 \sin{\left(q_{2} \right)} \cos{\left(q_{4} \right)} - 3 \sin{\left(q_{4} \right)} \cos{\left(q_{2} \right)} \cos{\left(q_{3} \right)}\end{array}\right)\end{equation}
\end{document}
